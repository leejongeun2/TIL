## 9:00-10:00

---

### 어제 수업 이후 강사님 장고정리 해주신 것

(지난주 복습) 

* Django : 웹 프레임워크로 서버의 역할  

* 서버 : URL + method로 HTTP 요청 받아서 처리하여 HTTP 응답하는 역할  

* 프레임워크의 구조 : MTV 

* Form : 사용자로부터 값을 받아서(input : name, value) 서버로 전송(form : action, method)

  

*  (오늘) 

* 웹 서비스는 UI <-> DB가 매우 밀접한 관계를 가짐.  

* 모델의 필드는 사용자가 입력하는 input 필드와 관계가 있음.  이 과정에서 Django ModelForm이 아래의 주된 역할을 진행함.

  1. Model 필드를 기반으로 HTML Form input 구성  
  2. 데이터 유효성 검사 이후 DB 저장 or 에러 메시지 전달 

* (오늘 2) 

  1. 서버에 자료를 데이터를 전송하는 Form은 일반적으로 POST 요청으로 처리한다.  

  2) Django에서는 CSRF를 방지하기 위한 Token 설정을 강제하고 있다. (보안상 이점)

### 오늘 오전 장고 정리 (+파이썬)

**✔️로직/흐름 코드의 이해에 초점맞춰서 강의 학습**

✔️웹 프레임워크 == 틀에 박힌 일(아래 순서)

1. url로 요청을 받아서 2. 처리하고 3. 응답을 함(2,3은 뷰가 담당하고 있음)

#### 서버

* 데이터베이스에서 값 가져오고, 저장하는 역할 => 장고 orm이 도와주고 있음



* 서비스의 기능을 만들 기 위해 코드를 작성하는 것
* 현재는 게시판 크루드 기능을 만들고 있음



### 게시판

![img](https://cdn.discordapp.com/attachments/993784925604020234/1027024097084985394/Whiteboard_27.png)

✔️아래 기능을 구성하려면 어떠한 것을 정하고 들어가야될지? 

>요청을 어떻게 받을지 url을 정의해야함! 

* 생성 
  * 사용자에게 html폼을 제공 -> new -> 겟 아티클
  * 실제 디비 저장 과정 create -> 포스트 아티클
  * 이 두개를 create함수로 합침 
  * 디비에 article.object.create()
  * 응답: create.html
  * 리다이렉트 상세페이지
* 조회
  * 글을 누르면 디비 값 조회 article/~~/
  * article.objtce.get()
  * 디테일 상테페이지
  * 리다이렉트 목록페이지
* 삭제
  * 버튼 누르면 디비 값 삭제 /~~/delet
  * article.objtce.get()
* 수정
  * Hmtl form + 기존값 /~~ edit -> get
  * 기존 디비 수정 과정 /~~upadqte -> 포스트
  * 업데이트 함수로 합침
  * article.objtce.get()
  * 업데이트 제공
  * 리다이렉트 상세페이지

* ~~는 기존 값 , pk값
* url요청 : 패쓰/메서드/
* 버튼 누르면 그 버튼을 요청하는 유알엘이 있음



### 생성

* 모델폼

  * 디비필드가 사실상 html폼과 밀접

  * 1. 디비 필드 변할 때 Htmle도 맞춰서 변하기

  * 2. 인풋값이 디비에 들어가기 전에 유효성 검사

  * 모델 폼 정의하는데 있어서 중요한 것 

    * 1. 어떠한 디비에서 어떤 필드를? 
    * 2. 사용자 인풋 값을 받아서 그게 통과하면 저장! 
         1. 유효성 검사 통과했을 때 => 저장
         2. 안했을 때 => 에러메세지
         3. 슬라이드 영어 도식화 일어보기

    

  * 글쓰래 하고 요청 -> 비어있는 폼을 줌 => get

  * => 폼에 데이터를 넣고  입력한 다음 요청 보냄 => 서버에서는 유효성 검사함 => 통과 => 디비에 저장 (실패 시, 에러메세지 + 기존 사용자 입력한 값을 포함해서 폼으로 줌) => post

  * 같은 유알엘 안에서 분개, 이 두개는 중복되는 코드가 많기 떄문

### * 가상환경 쓰는 이유

* 장고는 파이썬 기반 웹 프레임 워크
* 각 프로젝트 별 별도 패키지 관리
* 가상환결 폴더에 있는 액티베이트라는 걸 실행

### 장고앱

* 주요 기능 단위의 앱 구조, 앱 별로 mtv구조를 가지는 모습 + `urls.py`

### 앱생성

### 앱 등록

### urls.py설정

1. 실행시킬 
2. Articles :index == /article/

### 크루드 기능 구현

사용자에게 html form 제공, 입력 받은 데이터 처리 => 모델폼 로직으로 변경

1. 게시글 생성

   사용자에게 html form 제공, 입력 받은 데이터 처리 => 모델폼 로직으로 변경

* 모델 폼 선언
  * 선언 된 모델에 따른 필드 구성
  * 1. 폼생성
    2. 유효성 검사

* html form 제공
  * 어떤 필드를 구성할 것인지,(네임, 밸류)
  * 어디로 보낼 것인지 (액션, 메서드)
  * 포스트 요청은 값을 쓰고 글쓰기 버튼 눌렀 을 때 
    * /articles/create/ 로 감
    * 뷰에서는 request.POST 받아야함
  * 겟 요청일 때 => articles/create/?title=123&content=123이 되며, 뷰에서는 request.GET 받아야함
    * 인풋의 네임에 의해 뒤에 titl, content로 가져감
* 입력 받은 데이터 처리 



Get(pk=pk) => 앞에 pk는 모델의 컬럼명 ,모델에 있는 필드여야만함, 뒤에 있는 Pk는 요청들어온 값



## 어드민

* 슬래시 어드민하면 어드민 사이트 들어갈 수 있음
* 아이디, 비빌먼호 만들어야함
* pyhotn manage.py createsuperuser
* 사용자이름: admin
* 비밀번호 123
* y 
* 접속
* 사이틑관리, 사용자이름에 어드민이 추가 되어있음
* 우리가 관리하고 있는 앱 찾기 => 아티클즈 앱을 관리하고 있고, 그 안에 어드민.py가 있음
* 관리자사이트에서는 모델 데이터베이스를 관리하고 싶음
* Admin.py에 너의 모델을 여기에 등록하라고 적혀있음
* Admin.site.register(Article)
* from .models import article
* 새로 고침하면 게시글 볼 수 있음, 클릭하면 게시글 객체들 볼 수 있음
* 삭제할 수도 있고, 수정할 수도 있 음 => 실제 반영됨
* 관리자 폼 커스터마징(공식문서)
  * 클래스 정의

### 스태틱

* 이 사이트에서 관리를 하고싶은게 예쁘게 꾸밀 수 있는것? (이미지드의 정적 파일을 어떻게 관리하는지 설정)
  * 유알엘 요청들어온것에 따라서 정적자원을 제공 
  * 셋팅즈에 스태틱 유알엘이 있음
  * 인스톨에서도 스태택파일즈가 있음
  * 위 두개는 정적 파일 관리하는 것임
  * 이미지 넣을 때, ./articles/images/apparel.jpeg 로 생각할 수 있으나, 노출 안됨
  * 스태틱이라는 폴더에 이미지 넣고 {% load static %}, {% static 'apparel.jpeg' %}
  * 스태틱 문구는 고정
  * 스태틱 폴더도 고정
  * 로드는 임포트랑 같은 의미로 보면 됨, 최상단 작성

