✔️반복숙달

## 9:00-10:00

---

### 모델폼

1. 장고는 무엇일까? 

   > 웹 프레임워크

2. 무엇을 만들 수 있을까? 

   > 웹 서비스를 만들게 됨

3. 부트스트랩과 차이는? 

   > 웹 서버를 만들 수 있도록 도와주는 프레임워크

4. 서버 기본은 무엇인가? 

   > 클라이언트 요청이 들어오면 **장고는 응답을 해주는 친구** (http 기본)
   >
   > **장고는 **
   >
   > **1. 유알엘로 요청을 받아서, **=> 유알엘 만들어주고 
   >
   > **2. 처리하고 **=> 유알엘 처리하는 뷰의 함수 만들어주고=> 처리하는 과정에서 모델을 만들어줄 수 있음 
   >
   > 3. **응답을 해줌(http 서버 - 클라이언트 모델) => 어떤 응답을 할 템플릿을 만들어주고**
   >    * 위에는 가장 기본적인 구조 MTV(MVC의 장고의 구현체) : 각각의 기능을 분리해놓는 것



### 실제 만드는 모습 시연

1. 가상환경 설치 

   > 패키지를 별도로 다르게 가져가기 위해서
   >
   > 가상환경 내 액티베이트 실행하는게 핵심

2. 장고설치 

   > pip install djnago==3.2.13

3. 기록지 남김 => 추후 프로젝트 시작할 때 특정 가상환경에서 얘를 직접 설치할 때 버전에 맞춰서 설치 될 수 있도록 =

   > Pip freeze > requirenemts.txt  

4. 가상환경에서 장고 프로젝트 생성

   > django-admin startproject 프로젝트이름 .

5. 서버실행

   > 로켓확인 됨
   >
   > ⚠️서버로그 : 서버에 접속하는 로그들이 터미널에 기록됨
   >
   > 참고: 셋팅.py에서 언어 설정 가능

6. 앱 생성

   > 장고의 여러 기능들을 앱 단위로 개발
   >
   > mtv패턴은 앱단위로 가지고 있게 됨

7. 앱 등록

   >  settings.py에 기재

---

8. Url.py 패쓰에 아티클즈라고 들어오게 되면 아티클즈 앱에서 관리하고 싶어! 

   > 1. 상단에 인클루드 임포트
   > 2. 패쓰에 인클루드 (아티클즈.urls)
   > 3. 아이클즈 앱에 urls.py 파일 생성
   >    1. 유알엘 설정을 앱 단위로 한다고 했을 떄, 해당 파일에 프로젝트 url파일처럼 urlpatterns = [] 리스트 생성해야함
   >    2. 왜? 아티클즈앱에 있는 리스트를 떙겨오는 것이기 때문
   >    3. 해당 파일에 패쓰 임포트

9. 🔥Url > view > templates 

   > 유알엘 을 요청 받아서, 처리하고 응답을 해주는 것이니까 !! 
   >
   > 유알엘 등록하고, 뷰함수 생성, 템플릿 만든다!!

10. 아티클즈 앱 유알엘에 유알앨 생성 => 여기에 들어오면 어떤 처리를 하겠다! 

    >  상단에 뷰 임포트

11. 뷰로 넘어가서 함수 만들기!

    > 요청 정보를 받아서(리퀘스트) 원하는 페이지를 렌더!!

12. 템플릿 만들기 

    > 템플릿 > 앱이름 > 인덱스.html
    >
    > ⭐️사용자는 url로 요청을 보내고! > 요청이 서버에 들어오게 되고 > url목록 중에서 찾고 > 뷰에 있는 함수를 보고 뷰로 넘어가고 > 뷰에 있는 인덱스 함수 실행 > 거기에 있는 유알엘을 렌더하게 될것이고 > 렌더에 있는 템플릿이 보여짐!! ⭐️
    >
    > **함수: 요청정보를 받아서 렌더링** 
    >
    > 작성버튼: 이동할 유알엘을 에이태그에 넣어줌 ! 

---

### 생성, 조회, 수정, 삭제 크루드 정의할 것임

13. 모델 정의 => 아티클 모델 생성, 클래스 정의 

    > 게시판 기능이 -제목, -내용 , -글 작성시간/수정시간 데이터베이스에 저장

14. 설계를 했으니까 디비에 반영해야함 => 모델 설계 메이크마이그레이션 파일 생성 => 디비 반영 마이그레이트

### 크루드 기능 구현

13. create: 게시글 생성

    > 개별 유알엘 하나마다 뷰가 필요함!! 
    >
    > 기능만들고 싶을때 유알엘에 매핑 되는 함수는 뷰가 하나씩 필요함
    >
    > 게시글 생성은 아래 두가지 기능이있음? 기능 두개니까 2개 함수 만들어야함
    >
    > 1. 사용자에게 html을 제공해주고 기능
    > 2. 실제 디비에 저장하는 기능(입력한 데이터를 처리)

14. html 폼 제공 > 뉴 템플릿에서 처리 

    > 뉴 유알엘 정의 
    >
    > 함수 뉴 정의 
    >
    > 템플릿 뉴 생성 => 폼 구성
    >
    > > ⚠️폼에서 가장 중요한것! : 사용자에게 양식을 제공하고 값을 받아서(input name, value) 서버에 전송(action)

15. 입력 받은 데이터 처리 
    1. create라는 곳에서 !! , 여기로 전송해야함
    2. 뉴 템플릿 액션에서 지정(거기서 여기로 보내기!)
       1. 유알엘을 변수로써 관리하고 있으니까 액션에 유알엘 변수 표기법으로 써야함 {% url 'articles:create' %}
    3. 크리에이트 유알엘 생성
    4. 크리에이트 뷰 생성
       1. 실제 디비에 저장하는 로직 담당!! 
       2. 뉴에서 입력한 요청정보는 뷰함수에서 어떻게 사용?  
          1. 리퀘스트 객체로써 쓸 수 있음
          2. 겟이라는 곳에서 겟
          3. 모델즈에 정의 된 클래스를 가져와서 크리에이트 
       3. 게시글 디비에 생성하고 인덱스 페이지로 리턴 리다이렉트 => 목록 페이지로 돌아가!

### 게시글 목록 기능 구현

16. 인덱스에서 처리함,
17. 디비에서 게시글을 가져와서, 
    1. order_by('-pk') -=> 쿼리셋 역순
18.  템플릿에 던져줘야됨
    1. Context
19. articles(쿼리셋)를 for 문 돌림
20. 뉴 요청 > 사용자가 크리에이트 > 유알엘에 사용자가 입력한 컨텐츠가 나옴 => 로그 다시보기!!

### 포스트 메서드

* 겟은 어떤 앱 표현, 데이터를 조회하는 데 사용, 아티클(앱) 조회
* 포스트 메서드 제출은 서버에 어떠한 상태를 변화시키거나 야기시킴, 어떤 엔티티를 특별한 아티클(앱)로 제출

* 뉴 폼에서 메서드를 포스트로 추가하면 오류뜸

  * 해결방법: 폼 밑에 템플릿에 토큰 코드를 적으면 낫널 제약조건에 실패했다는 오류 뜸 => 타이틀 컬럼에 값이 들어오지 않았다!!

    * 포스트 요청을 보내게 되면 꺼내는 방법이 달라짐 => 뷰 크리에이트 함수를 겟이 아닌 포스트로 바꿔야됨 
    * 포스트 요청은 주소로써 들어가는 것이 아니라, 요청 메세지 사이에 담겨서 전송됨 => 유알엘 유지, 요청메세지의 데이터로써! 
    * 일반적 폼은 포스트로 처리함

    

* 평점을 기록, 등록하는 유알엘을 만들 경우? 로그인은 폼의 메서드가 포스트임, 디비에 저장해야 되기 때문

  * POST /movies/123/score
  * {% csrf_token %} 은 인풋을 만들어주는 것

* 평점 조회, 검색은 검색어를 조회임

  * GET /movie/123/score

### 장고 모델 폼

* 모델과 html 폼이 하나로써 동작

* 사용자를 불신하라! => 입력을 안했을 수도 있기 때문, 비어있는 거 막기, 인풋에 리콰이얼드 넣기(하지만 서버에서도 처리해야 됨)

* 모델에 타입을 지정했고 html을 표현했는데 검증 + 자연스럽게 하는 방법 없을가? 

  1. forms.py파일 생성

  2. 클래스 아티클폼(폼즈.모델폼):

  3. {{ article_from.as_p }}

     

1. 피태그로 감싸진 라벨+인풋의 구조를 만들어줌

2. 유효성 검사를 할 수 있음

   1. 폼에다가 메세지를 추가해서 보여줨

      ![image-20221004115822011](1004_화.assets/image-20221004115822011.png)

​	두개함수가 비슷하므로 합칠 수 있음

	* 뉴를 크리에이트 함수에 포함시킴
	* 작성하기 누르면 32번째줄 



### 상세보기, 수정, 삭제

* 상세보기
  * 특정한 글을 본다. => pk값  => 유알엘 맨 뒤에 <int:pk> , 디비에 있는 pk값을 유알엘에 넣어준다! 
  * 1. 유알엘 만들기
    2. 뷰에서 함수 만들고 특정 글을 가져온다. Get*(pk=pk)
    3. 컨텍스트로 템플릿에 객체 전달
* 수정하기
  * 특정 글 수정 => 사용자에게 수정할 수 있는 양식을 제공하고(get) 특정한 글을 수정한다. (post)
  * 유알엘 : <int:pk>/update 
  * 수정하면 업데이트로 요청이 들어오고,  리턴해서 리다이렉트로 디테일 페ㅐ이지하면 돌아옴
    * 수정하려면 세이브를 꼭해야함!
    * 인스턴스를 지정 꼭 해야지! 생성되지 않고 수정됨, 기존의 있는 것을 하느거니깐

### 정리

* 크리에이트 생성 : 1.유아이 제공(뉴)  2. 디비 저장(크리에이트)
* 리드(디테일): 1.디비에 특정가져와서 조회,
* 딜리트: 1. 디비에 특정가져와서 삭제
* 업데이트: 1.유아이제공(에딧) 2. 디비저장(업데이트)

---

* 모델폼: 모델에 정의된 필드대로 유아이 그려주고, 유효성검사하고, 디비에 저장도 됨
* 크리에이트 생성 : 1.유아이 제공(뉴) => 겟 2. 디비 저장(크리에이트)=>포스트
* 업데이트: 1.유아이제공(에딧) => 겟2. 디비저장(업데이트)=>포스트 
  * 요청에 따라서 개스 험슈 두개를 같은 함수 처리, 인밸리드할 떄 폼 전달해주는 코드를 단순화해서 처리하려구 
  * 포스트로 왔지만 폼으로 돌아가는 페이지로 가려구 
  * ⚠️겟 요청일 떄 처리흐름,
  *  포스트 요청일때 처리 흐름
    * 밸리드 할 때
    * 인밸리드 할 때 
* Form.py 어떠한 모델 어떠









